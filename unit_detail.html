<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ¦ãƒ‹ãƒƒãƒˆè©³ç´°</title>
<style>
:root{
  --bg:#f5f5f5; --card:#fff; --text:#222; --muted:#666; --border:#ccc; --accent:#333; --btn:#eee; --shadow:0 2px 8px rgba(0,0,0,0.1);
}
body.dark{--bg:#0f1115;--card:#151922;--text:#e6e6e6;--muted:#a3a3a3;--border:#2b2f3a;--accent:#7aa2f7;--btn:#1b2030;--shadow:0 2px 10px rgba(0,0,0,0.35);}
body{margin:0; font-family:sans-serif; background:var(--bg); color:var(--text); transition:.2s; padding:20px;}
h1,h2{margin-top:0;}
img{max-width:100%; border-radius:8px; margin:10px 0;}
table{width:100%; border-collapse:collapse; margin-bottom:15px;}
th,td{border:1px solid var(--border); padding:8px; text-align:left;}
th{background:var(--btn);}
.controls{display:flex; justify-content:flex-end; margin-bottom:10px;}
button{padding:6px 10px; border:none; border-radius:5px; cursor:pointer; background:var(--btn);}
a{color:var(--accent); text-decoration:none;}
</style>
</head>
<body>

<div class="controls">
  <button id="themeToggle">ğŸŒ™ ãƒ€ãƒ¼ã‚¯åˆ‡æ›¿</button>
</div>

<h1 id="unitName">èª­ã¿è¾¼ã¿ä¸­â€¦</h1>
<img id="unitImg" src="" alt="">
<p id="unitDesc"></p>

<h2>æ€§èƒ½</h2>
<table id="unitStats">
  <thead><tr><th>é …ç›®</th><th>å€¤</th></tr></thead>
  <tbody></tbody>
</table>

<h2>æ­¦å™¨</h2>
<table id="weaponStats">
  <thead><tr><th>é …ç›®</th><th>å€¤</th></tr></thead>
  <tbody></tbody>
</table>

<h2>ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«</h2>
<table id="passiveSkills">
  <thead><tr><th>ã‚¹ã‚­ãƒ«å</th><th>åŠ¹æœ</th></tr></thead>
  <tbody></tbody>
</table>

<a href="unit_list.html">â† ä¸€è¦§ã«æˆ»ã‚‹</a>

<script>
// ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–
(function initTheme(){
  if(localStorage.getItem("emobo_theme")==="dark") document.body.classList.add("dark");
})();

document.getElementById("themeToggle").addEventListener("click",()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("emobo_theme",document.body.classList.contains("dark")?"dark":"light");
});

// URLã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆIDå–å¾—
const params = new URLSearchParams(location.search);
const id = params.get('id');

if(id){
  fetch(`units/${id}.json`)
    .then(res=>res.json())
    .then(data=>{
      const m = data.machine;
      const w = data.weapon;
      const p = data.passiveSkills;

      // æ©Ÿä½“åãƒ»èª¬æ˜
      document.getElementById("unitName").textContent = m.aircraftName;
      document.getElementById("unitDesc").textContent = m.description;
      document.getElementById("unitImg").src = m.img || ""; // ç”»åƒãŒã‚ã‚Œã°è¡¨ç¤º
      document.getElementById("unitImg").alt = m.aircraftName;

      // æ€§èƒ½
      const statsTbody = document.getElementById("unitStats").querySelector("tbody");
      statsTbody.innerHTML = "";
      const performance = {
        "ç§»å‹•é€Ÿåº¦": m.moveSpeed,
        "åŠ é€Ÿåº¦": m.moveAccel,
        "æ…£æ€§æŠµæŠ—": m.moveResistPower,
        "ãƒ–ãƒ¬ãƒ¼ã‚­": m.moveBrake,
        "å›è»¢é€Ÿåº¦": m.rotationSpeed,
        "é˜²å¾¡åŠ›": m.defense,
        "ãƒªã‚¹ãƒãƒ¼ãƒ³é€Ÿåº¦": m.respawnPositionSelectMoveSpeed,
        "ç´¢æ•µç¯„å›²": m.searchHitRadius
      };
      for(const key in performance){
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${key}</td><td>${performance[key]}</td>`;
        statsTbody.appendChild(tr);
      }

      // æ­¦å™¨
      const weaponTbody = document.getElementById("weaponStats").querySelector("tbody");
      weaponTbody.innerHTML = "";
      const weaponStats = {
        "æ­¦å™¨å": w.memo,
        "æ”»æ’ƒåŠ›": w.attackPower,
        "æ”»æ’ƒç¯„å›²": w.attackMoveRange,
        "ãƒ’ãƒƒãƒˆåŠå¾„": w.attackHitRadius,
        "æ”»æ’ƒæ™‚é–“": w.attackDuration
      };
      for(const key in weaponStats){
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${key}</td><td>${weaponStats[key]}</td>`;
        weaponTbody.appendChild(tr);
      }

      // ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«
      const passiveTbody = document.getElementById("passiveSkills").querySelector("tbody");
      passiveTbody.innerHTML = "";
      p.forEach(skill=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${skill.memo}</td><td>åŠ¹æœå€¤: ${skill.attackPower}</td>`;
        passiveTbody.appendChild(tr);
      });

    })
    .catch(err=>{
      console.error(err);
      document.getElementById("unitName").textContent = "ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¤±æ•—";
    });
}else{
  document.getElementById("unitName").textContent = "IDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“";
}
</script>

</body>
</html>
