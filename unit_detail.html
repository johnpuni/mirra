<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ¦ãƒ‹ãƒƒãƒˆè©³ç´°ï¼ˆã‚®ãƒ£ãƒ©ãƒªãƒ¼é¢¨ãƒ»ãƒ•ãƒ«ç¿»è¨³ç‰ˆï¼‰</title>
<style>
:root{
  --bg:#f5f5f5; --card:#fff; --text:#222; --muted:#666; --border:#ccc; --accent:#333;
  --btn:#eee; --shadow:0 2px 8px rgba(0,0,0,0.1);
  --attack:#f28c8c; --defense:#8cc7f2; --movement:#8cf29c;
}
body.dark{
  --bg:#0f1115; --card:#1a1e27; --text:#e6e6e6; --muted:#a3a3a3; --border:#2b2f3a; --accent:#7aa2f7;
  --btn:#1b2030; --shadow:0 2px 10px rgba(0,0,0,0.35);
  --attack:#f77; --defense:#4aa; --movement:#4a7;
}
body{
  margin:0; font-family:sans-serif; background:var(--bg); color:var(--text); transition:.2s; padding:20px;
}
h1{margin-bottom:10px;}
img#unitImg{
  max-width:300px; width:100%; border-radius:10px; display:block; margin:0 auto 15px auto; box-shadow: var(--shadow); cursor:pointer;
}
.controls{display:flex; justify-content:flex-end; margin-bottom:15px;}
button{padding:6px 10px; border:none; border-radius:5px; cursor:pointer; background:var(--btn); transition:.2s;}
button:hover{opacity:.8;}
a{color:var(--accent); text-decoration:none; font-weight:bold; display:inline-block; margin-top:15px;}
a:hover{text-decoration:underline;}
.card-container{display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin-bottom:20px;}
.card{background:var(--card); border-radius:10px; box-shadow:var(--shadow); padding:15px; width:320px; transition:.2s;}
.card:hover{transform:scale(1.03);}
.card h3{margin-top:0; margin-bottom:10px; font-size:1.1em;}
.card ul{list-style:none; padding:0; margin:0;}
.card li{margin-bottom:5px;}
.attack{border-left:4px solid var(--attack); padding-left:8px;}
.defense{border-left:4px solid var(--defense); padding-left:8px;}
.movement{border-left:4px solid var(--movement); padding-left:8px;}

/* ãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨ */
.modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000;}
.modal img{max-width:90%; max-height:90%; border-radius:10px;}
</style>
</head>
<body>

<div class="controls">
  <button id="themeToggle">ğŸŒ™ ãƒ€ãƒ¼ã‚¯åˆ‡æ›¿</button>
</div>

<h1 id="unitName">èª­ã¿è¾¼ã¿ä¸­â€¦</h1>
<img id="unitImg" src="" alt="">
<p id="unitDesc"></p>

<div class="card-container">
  <div class="card movement">
    <h3>æ©Ÿä½“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
    <ul id="unitStats"></ul>
  </div>
  <div class="card attack">
    <h3>æ­¦å™¨è¨­å®š</h3>
    <ul id="weaponStats"></ul>
  </div>
  <div class="card defense">
    <h3>ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«</h3>
    <ul id="passiveSkills"></ul>
  </div>
</div>

<a href="unit_list.html">â† ä¸€è¦§ã«æˆ»ã‚‹</a>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="imgModal">
  <img id="modalImg" src="" alt="">
</div>

<script>
// ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆæœŸåŒ–
(function initTheme(){
  if(localStorage.getItem("emobo_theme")==="dark") document.body.classList.add("dark");
})();
document.getElementById("themeToggle").addEventListener("click",()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("emobo_theme",document.body.classList.contains("dark")?"dark":"light");
});

// URLã‹ã‚‰ãƒ¦ãƒ‹ãƒƒãƒˆIDå–å¾—
const params = new URLSearchParams(location.search);
const id = params.get('id');

// ç¿»è¨³ãƒãƒƒãƒ—ï¼ˆå…¨ã‚­ãƒ¼å¯¾å¿œï¼‰
const translations = {
  // æ©Ÿä½“
  aircraftName:"æ©Ÿä½“å", description:"èª¬æ˜", img:"ç”»åƒ",
  moveSpeed:"ç§»å‹•é€Ÿåº¦", moveAccel:"åŠ é€Ÿåº¦", moveResistPower:"æ…£æ€§æŠµæŠ—",
  moveBrake:"ãƒ–ãƒ¬ãƒ¼ã‚­", rotationSpeed:"æ—‹å›é€Ÿåº¦",
  respawnPositionSelectMoveSpeed:"ãƒªã‚¹ãƒãƒ¼ãƒ³é¸æŠé€Ÿåº¦", defense:"é˜²å¾¡åŠ›",
  searchHitRadius:"ç´¢æ•µç¯„å›²", weaponPositionOffset:"æ­¦å™¨ä½ç½®ã‚ªãƒ•ã‚»ãƒƒãƒˆ",
  pilotPositionOffset:"ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆä½ç½®ã‚ªãƒ•ã‚»ãƒƒãƒˆ", pilotScale:"ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚µã‚¤ã‚º",
  avatarNeckPositionOffset:"ã‚¢ãƒã‚¿ãƒ¼ãƒãƒƒã‚¯ä½ç½®", avatarScale:"ã‚¢ãƒã‚¿ãƒ¼ã‚µã‚¤ã‚º",
  ForceShowFlyGauge:"é£›è¡Œã‚²ãƒ¼ã‚¸å¼·åˆ¶è¡¨ç¤º",

  // æ­¦å™¨è¨­å®š
  m_Name:"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå", memo:"æ­¦å™¨å", weaponCategry:"æ­¦å™¨ã‚«ãƒ†ã‚´ãƒª",
  enemySearchRadius:"ç´¢æ•µåŠå¾„", enemySearchOffset:"ç´¢æ•µã‚ªãƒ•ã‚»ãƒƒãƒˆ",
  attackPower:"æ”»æ’ƒåŠ›", attackStopPower:"åœæ­¢åŠ›", attackIgnoreDefense:"é˜²å¾¡ç„¡è¦–",
  attackDisableBrakeTime:"ãƒ–ãƒ¬ãƒ¼ã‚­ç„¡åŠ¹æ™‚é–“", additionalPower:"è¿½åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸",
  attackHitShape:"å½“ãŸã‚Šåˆ¤å®šå½¢çŠ¶", attackHitRadius:"ãƒ’ãƒƒãƒˆåŠå¾„",
  attackHitSize:"ãƒ’ãƒƒãƒˆã‚µã‚¤ã‚º", hitGrowingTimeRate:"ãƒ’ãƒƒãƒˆæˆé•·ç‡",
  attackHitPositionOffset:"ãƒ’ãƒƒãƒˆä½ç½®ã‚ªãƒ•ã‚»ãƒƒãƒˆ", attackMoveSpeed:"æ”»æ’ƒç§»å‹•é€Ÿåº¦X",
  attackMoveAccel:"æ”»æ’ƒåŠ é€Ÿåº¦X", attackMoveSpeedY:"æ”»æ’ƒç§»å‹•é€Ÿåº¦Y",
  attackMoveAccelY:"æ”»æ’ƒåŠ é€Ÿåº¦Y", attackDuration:"æ”»æ’ƒæ™‚é–“", attackTimeSpan:"æ”»æ’ƒé–“éš”",
  isBackCritical:"èƒŒé¢ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«", isSideCritical:"å´é¢ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«",
  shieldBreak:"ã‚·ãƒ¼ãƒ«ãƒ‰ãƒ–ãƒ¬ã‚¤ã‚¯", isReflector:"åå°„",
  refrectionRate:"åå°„ç‡", reflectionAddSpeedRate:"åå°„åŠ é€Ÿç‡",
  invalidRefrection:"åå°„ç„¡åŠ¹", isSelfRefrection:"è‡ªå·±åå°„", selfRefrectionNum:"è‡ªå·±åå°„å›æ•°",
  refrectionRandomRot:"åå°„ãƒ©ãƒ³ãƒ€ãƒ å›è»¢", isHideHitEffect:"ãƒ’ãƒƒãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆéè¡¨ç¤º",
  killComboRate:"ã‚­ãƒ«ã‚³ãƒ³ãƒœå€ç‡", useLimitMax:"ä½¿ç”¨å›æ•°ä¸Šé™",
  spriteButtonIcon:"ã‚¢ã‚¤ã‚³ãƒ³", useClickWhenFire:"ã‚¯ãƒªãƒƒã‚¯ç™ºå°„",
  useChargeWhenFire:"ãƒãƒ£ãƒ¼ã‚¸ç™ºå°„", useChargeWithoutFire:"ãƒãƒ£ãƒ¼ã‚¸ã®ã¿",
  weaponAutoChargeSettings:"è‡ªå‹•ãƒãƒ£ãƒ¼ã‚¸è¨­å®š", maxChargeTime:"æœ€å¤§ãƒãƒ£ãƒ¼ã‚¸æ™‚é–“",
  inChargeDeceleratingRate:"ãƒãƒ£ãƒ¼ã‚¸æ¸›é€Ÿç‡", inChargeMoveSpeedRate:"ãƒãƒ£ãƒ¼ã‚¸ä¸­ç§»å‹•é€Ÿåº¦ç‡",
  inChargeSe:"ãƒãƒ£ãƒ¼ã‚¸éŸ³", chargeMaxFx:"æœ€å¤§ãƒãƒ£ãƒ¼ã‚¸FX", inChargeFx:"ãƒãƒ£ãƒ¼ã‚¸ä¸­FX",
  disableChargeEffectWhenMax:"æœ€å¤§æ™‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç„¡åŠ¹", isChargeBuffContext:"ãƒãƒ£ãƒ¼ã‚¸ãƒãƒ•æœ‰åŠ¹",
  buffContexts:"ãƒãƒ•å†…å®¹", attackPowerRateCurve:"æ”»æ’ƒåŠ›ã‚«ãƒ¼ãƒ–", frontMoveForce:"å‰é€²åŠ›",
  frontMoveForceRateCurve:"å‰é€²åŠ›ã‚«ãƒ¼ãƒ–", bulletFx:"å¼¾ä¸¸FX", shootSeType:"å°„æ’ƒéŸ³",

  // ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«
  buffType:"ãƒãƒ•ç¨®é¡", targetType:"å¯¾è±¡ã‚¿ã‚¤ãƒ—", tag:"ã‚¿ã‚°", powerScaleType:"åŠ¹æœã‚¹ã‚±ãƒ¼ãƒ«ç¨®é¡",
  shootAnimName:"ç™ºå°„ã‚¢ãƒ‹ãƒ¡å", shootFx:"ç™ºå°„FX", triggerType:"ç™ºå‹•æ¡ä»¶ã‚¿ã‚¤ãƒ—",
  triggerValue:"ç™ºå‹•æ¡ä»¶å€¤", triggerString:"ç™ºå‹•æ¡ä»¶æ–‡å­—åˆ—", gradeType:"ãƒ©ãƒ³ã‚¯ã‚¿ã‚¤ãƒ—",
  maxGradeNum:"æœ€å¤§ãƒ©ãƒ³ã‚¯æ•°", remainingLifeBuffSettings:"æ®‹ãƒ©ã‚¤ãƒ•ãƒãƒ•è¨­å®š",
  shouldPlayParticleWhenEmitBuff:"ãƒãƒ•æ™‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«"
};

// å€¤ã‚’æ•´å½¢
function formatValue(val){
  if(val==null) return "-";
  if(typeof val==="number") return (Math.abs(val)%1===0) ? val : val.toFixed(2);
  if(Array.isArray(val)) return val.join(", ");
  if(typeof val==="object") return Object.entries(val).map(([k,v])=>`${k}:${v}`).join(", ");
  return val;
}

if(id){
  fetch(`units/${id}.json`)
    .then(res=>res.json())
    .then(data=>{
      const m = data.machine || {};
      const w = data.weaponSettings ? [data.weaponSettings] : []; // é…åˆ—åŒ–
      const p = data.passiveSkills || [];

      // ã‚¿ã‚¤ãƒˆãƒ«éƒ¨
      document.getElementById("unitName").textContent = m.aircraftName || m.m_Name || "åç§°ä¸æ˜";
      document.getElementById("unitDesc").textContent = m.description || "";
      const unitImg=document.getElementById("unitImg");
      unitImg.src=m.img||"images/default.png";
      unitImg.alt=m.aircraftName||m.m_Name||"no name";

      // æ©Ÿä½“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
      const statsUl=document.getElementById("unitStats");
      statsUl.innerHTML="";
      Object.keys(m).forEach(key=>{
        if(["aircraftName","description","img","m_Name"].includes(key)) return;
        const li=document.createElement("li");
        li.textContent=`${translations[key]||key}: ${formatValue(m[key])}`;
        statsUl.appendChild(li);
      });

      // æ­¦å™¨è¨­å®š
      const weaponUl=document.getElementById("weaponStats");
      weaponUl.innerHTML="";
      if(w.length===0) weaponUl.innerHTML="<li>ãªã—</li>";
      else w.forEach((weapon,i)=>{
        const title=document.createElement("li");
        title.textContent=`--- æ­¦å™¨${i+1} ---`;
        weaponUl.appendChild(title);
        Object.keys(weapon).forEach(key=>{
          const li=document.createElement("li");
          li.textContent=`${translations[key]||key}: ${formatValue(weapon[key])}`;
          weaponUl.appendChild(li);
        });
      });

      // ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«
      const passiveUl=document.getElementById("passiveSkills");
      passiveUl.innerHTML="";
      if(p.length===0) passiveUl.innerHTML="<li>ãªã—</li>";
      else p.forEach((skill,i)=>{
        const title=document.createElement("li");
        title.textContent=`--- ã‚¹ã‚­ãƒ«${i+1} ---`;
        passiveUl.appendChild(title);
        Object.keys(skill).forEach(key=>{
          const li=document.createElement("li");
          li.textContent=`${translations[key]||key}: ${formatValue(skill[key])}`;
          passiveUl.appendChild(li);
        });
      });

    })
    .catch(err=>{
      console.error(err);
      document.getElementById("unitName").textContent="ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¤±æ•—";
    });
}else{
  document.getElementById("unitName").textContent="IDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“";
}

// ç”»åƒãƒ¢ãƒ¼ãƒ€ãƒ«
const modal=document.getElementById("imgModal");
const modalImg=document.getElementById("modalImg");
const unitImg=document.getElementById("unitImg");
unitImg.addEventListener("click",()=>{
  modal.style.display="flex";
  modalImg.src=unitImg.src;
});
modal.addEventListener("click",()=>modal.style.display="none");
</script>

</body>
</html>
