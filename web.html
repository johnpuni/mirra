<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirrativ Lite Player</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #111; color: #fff; padding: 20px; text-align: center; line-height: 1.6; }
        .card { background: #222; border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); margin-bottom: 20px; border: 1px solid #333; }
        h1 { color: #ff005c; font-size: 1.5rem; margin-bottom: 5px; }
        .btn { background: #ff005c; color: #fff; border: none; padding: 15px 30px; border-radius: 30px; font-weight: bold; font-size: 1.1rem; width: 100%; cursor: pointer; margin: 10px 0; transition: 0.2s; }
        .btn:active { transform: scale(0.98); opacity: 0.8; }
        .step { text-align: left; background: #333; padding: 15px; border-radius: 10px; margin-bottom: 10px; font-size: 0.9rem; }
        .important { color: #ffeb3b; font-weight: bold; }
        a { color: #03a9f4; text-decoration: none; }
    </style>
</head>
<body>

    <h1>Mirrativ Lite Player</h1>
    <p style="font-size: 0.8rem; color: #aaa;">ã‚¹ãƒãƒ›ãƒ–ãƒ©ã‚¦ã‚¶å°‚ç”¨ãƒ»è»½é‡è¦–è´ãƒ„ãƒ¼ãƒ«</p>

    <div class="card">
        <button class="btn" onclick="copyCode()">ãƒ„ãƒ¼ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
        <p id="msg" style="color:#4caf50; font-size:0.8rem; display:none; font-weight:bold;">âœ… ã‚³ãƒ”ãƒ¼æˆåŠŸï¼</p>
    </div>

    <div class="step">
        <b style="color:#ff005c;">è¨­å®šæ–¹æ³•ï¼ˆæœ€åˆã®ä¸€å›ã ã‘ï¼‰</b><br>
        1. ä¸Šã®ãƒœã‚¿ãƒ³ã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼<br>
        2. ã“ã®ãƒšãƒ¼ã‚¸ã‚’<b>ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ç™»éŒ²</b>ã™ã‚‹<br>
        3. ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ç·¨é›†ã§ã€URLæ¬„ã®ä¸­èº«ã‚’å…¨éƒ¨æ¶ˆã—ã¦<b>ã‚³ãƒ”ãƒ¼ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘</b>ã¦ä¿å­˜ã€‚åå‰ã‚’ã€ŒãƒŸãƒ©å†ç”Ÿã€ãªã©ã«ã™ã‚‹ã€‚
    </div>

    <div class="step">
        <b style="color:#ff005c;">ä½¿ã„æ–¹</b><br>
        1. <a href="https://www.mirrativ.com/">ãƒŸãƒ©ãƒ†ã‚£ãƒ–å…¬å¼ã‚µã‚¤ãƒˆ</a>ã‚’é–‹ã<br>
        2. ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«ã€ŒãƒŸãƒ©å†ç”Ÿã€ã¨æ‰“ã¡ã€ä¿å­˜ã—ãŸãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’å®Ÿè¡Œ<br>
        3. IDå…¥åŠ›æ¬„ãŒå‡ºã‚‹ã®ã§ã€IDã‚’å…¥ã‚Œã¦å†ç”Ÿï¼
    </div>

    <textarea id="targetCode" style="display:none;">javascript:(function(){const uid=prompt("é…ä¿¡è€…IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„","");if(!uid)return;fetch(`https://www.mirrativ.com/api/live/live_history?user_id=${uid}`).then(r=>r.json()).then(h=>{if(!h.lives||!h.lives.length)throw "é…ä¿¡å¤–";const lId=h.lives[0].live_id;return fetch(`https://www.mirrativ.com/api/live/get_streaming_url?live_id=${lId}`).then(r=>r.json()).then(s=>{return {m:s.streaming_url_hls, lId:lId}})}).then(data=>{const m=data.m; const lId=data.lId; if(!m)throw "URLãªã—";const base=document.createElement('div');base.style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999;background:#000;display:flex;flex-direction:column;";const col=document.createElement('div');col.id="m-log";col.style="height:35%;overflow-y:auto;background:#1a1a1a;color:#fff;font-size:12px;padding:8px;border-bottom:1px solid #333;text-align:left;";const v=document.createElement('video');v.src=m;v.controls=true;v.playsinline=true;v.style="flex:1;width:100%;background:#000;";const close=document.createElement('button');close.innerText="âœ• é–‰ã˜ã‚‹";close.style="position:fixed;top:10px;right:10px;z-index:1000000;padding:8px 12px;background:rgba(255,0,92,0.8);color:#fff;border:none;border-radius:20px;font-weight:bold;";close.onclick=()=>base.remove();const pasteBtn=document.createElement('button');pasteBtn.innerText="ğŸ“‹ IDã‚’è²¼ã‚Šä»˜ã‘";pasteBtn.style="margin-bottom:10px;padding:5px;background:#444;color:#fff;border:none;border-radius:5px;width:100%;";pasteBtn.onclick=async()=>{try{const text=await navigator.clipboard.readText();const newId=prompt("è²¼ã‚Šä»˜ã‘ã‚‰ã‚ŒãŸIDã‚’ç¢ºèª:",text);if(newId)location.href='javascript:window.miraStart("'+newId+'")';}catch(e){alert("ãƒšãƒ¼ã‚¹ãƒˆæ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“");}};/* åˆæœŸåŒ–å‡¦ç† */base.appendChild(col);base.appendChild(v);base.appendChild(close);document.body.appendChild(base);v.play();const ws=new WebSocket(`wss://www.mirrativ.com/api/live/live_comments?live_id=${lId}`);ws.onmessage=(e)=>{const d=JSON.parse(e.data);const line=document.createElement('div');line.style.marginBottom="4px";if(d.type===1)line.innerText=`${d.handle}: ${d.comment}`;if(d.type===2){line.innerText=`ğŸ ${d.handle}: ${d.gift_item_name}`;line.style.color="#ff005c";line.style.fontWeight="bold";}col.appendChild(line);col.scrollTop=col.scrollHeight;};}).catch(e=>alert("ã‚¨ãƒ©ãƒ¼: "+e))})();</textarea>

    <script>
        function copyCode() {
            const copyTarget = document.getElementById("targetCode");
            copyTarget.style.display = "block";
            copyTarget.select();
            document.execCommand("Copy");
            copyTarget.style.display = "none";
            const msg = document.getElementById("msg");
            msg.style.display = "block";
            setTimeout(() => { msg.style.display = "none"; }, 3000);
        }
    </script>
</body>
</html>
