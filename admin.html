<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>イベント登録フォーム（管理者用）</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 40px auto; background:#f9f9f9; padding: 20px; border-radius: 10px; }
    label { display: block; margin-top: 15px; }
    input, select, textarea { width: 100%; padding: 8px; font-size: 16px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 15px; font-size: 16px; cursor: pointer; }
    #message { margin-top: 20px; font-weight: bold; }
    .warning { color: red; }
  </style>
</head>
<body>

<h1>イベント登録フォーム</h1>

<form id="eventForm">
  <label>タイトル
    <input type="text" id="title" required />
  </label>

  <label>リンクURL
    <input type="url" id="link" required />
  </label>

  <label>画像URL
    <input type="url" id="img" required />
  </label>

  <label>開始日
    <input type="date" id="startDate" required />
  </label>

  <label>終了日
    <input type="date" id="endDate" required />
  </label>

  <label>キーワード（カンマ区切り）
    <input type="text" id="keywords" />
  </label>

  <button type="submit">イベントを追加</button>
</form>

<div id="message"></div>

<script>
  const form = document.getElementById("eventForm");
  const message = document.getElementById("message");

  // 仮の既存イベントタイトルリスト（重複検知用に本来はJSONを読み込みたい）
  const existingTitles = ["10周年復刻イベント", "夏祭りコラボ開催"];

  form.addEventListener("submit", e => {
    e.preventDefault();

    const title = form.title.value.trim();
    const link = form.link.value.trim();
    const img = form.img.value.trim();
    const startDate = form.startDate.value;
    const endDate = form.endDate.value;
    const keywords = form.keywords.value.split(",").map(k => k.trim()).filter(k => k);

    // 重複チェック（完全一致）
    if (existingTitles.includes(title)) {
      message.innerHTML = `<span class="warning">⚠️ 同じタイトルのイベントが既に存在します。</span>`;
      return;
    }

    // 日付チェック
    if (startDate > endDate) {
      message.innerHTML = `<span class="warning">⚠️ 開始日は終了日より前の日付を選択してください。</span>`;
      return;
    }

    // 新イベントオブジェクト作成
    const newEvent = {
      title,
      link,
      img,
      startDate,
      endDate,
      keywords
    };

    // ここでサーバーに送るなどの処理が必要
    // 今はJSONのテキストを生成して表示
    message.innerHTML = `<pre>新イベントJSONデータ:\n${JSON.stringify(newEvent, null, 2)}</pre>`;

    // フォームリセット
    form.reset();
  });
</script>

</body>
</html>
