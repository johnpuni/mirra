<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Schedule Extractor</title>
<style>
body{font-family:sans-serif;background:#111;color:#fff;padding:20px}
textarea,input,button{width:100%;margin-top:10px;padding:10px;font-size:14px}
button{background:#2ea44f;border:0;color:#fff;border-radius:5px}
.card{border:1px solid #333;padding:10px;margin-top:10px;border-radius:8px}
</style>
</head>
<body>

<h2>ğŸ›  ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æŠ½å‡ºãƒ„ãƒ¼ãƒ«</h2>

<input id="url" placeholder="æŠ½å‡ºå…ƒURLã‚’è²¼ã‚‹">
<button onclick="extract()">æŠ½å‡ºé–‹å§‹</button>

<div class="card">
<h3>JSON å‡ºåŠ›</h3>
<textarea id="output" rows="15"></textarea>
<button onclick="copy()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
</div>

<script>
async function extract(){
 const url=document.getElementById("url").value;
 const html=await fetch(url).then(r=>r.text());
 const doc=new DOMParser().parseFromString(html,"text/html");

 const events=[...doc.querySelectorAll("#event-banners img")].map(img=>({
  start:img.dataset.start,
  end:img.dataset.end,
  url:"mirr://webview/window/open?url="+img.dataset.url,
  image:img.src||null
 }));

 document.getElementById("output").value=
  JSON.stringify(events,null,2);
}

function copy(){
 navigator.clipboard.writeText(
  document.getElementById("output").value
 );
 alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
}
</script>
</body>
</html>
