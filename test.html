<script>
  const url = "https://cors-anywhere.herokuapp.com/https://www.mirrativ.com/api/emomo_run/event?gift_event_id=4063";

  fetch(url)
    .then(res => res.json())
    .then(data => {
      console.log("APIレスポンス:", data);
      document.getElementById("status").textContent = "取得成功！";
      const list = document.getElementById("ranking");

      if (data.ranking) {
        data.ranking.forEach((user, i) => {
          const li = document.createElement("li");
          li.textContent = `${i + 1}位: ${user.user_name} (${user.score})`;
          list.appendChild(li);
        });
      } else {
        list.innerHTML = "<li>ランキングデータが見つかりませんでした</li>";
      }
    })
    .catch(err => {
      document.getElementById("status").textContent = "エラー: " + err;
      console.error(err);
    });
</script>
