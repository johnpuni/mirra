<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>エモバト情報</title>
<style>
:root{
  --bg:#f5f5f5; --card:#fff; --text:#222; --muted:#666; --border:#ccc; --accent:#333; --btn:#eee; --shadow:0 2px 8px rgba(0,0,0,0.1);
}
body.dark{ --bg:#0f1115; --card:#151922; --text:#e6e6e6; --muted:#a3a3a3; --border:#2b2f3a; --accent:#7aa2f7; --btn:#1b2030; --shadow:0 2px 10px rgba(0,0,0,0.35);}
body{font-family:sans-serif;margin:0;background:var(--bg);color:var(--text);transition:.2s;}
header{background:var(--accent);padding:12px;text-align:center;color:#fff;font-size:1.3em;}
nav{text-align:center;margin:10px 0;}
nav a{color:var(--accent);font-weight:bold;text-decoration:none;font-size:1.1em;}
main{max-width:960px;margin:0 auto;background:var(--card);padding:20px;border-radius:8px;box-shadow:var(--shadow);}
.tabs{display:flex;gap:6px;justify-content:center;margin-bottom:15px;}
.tabs button{padding:6px 12px;border-radius:6px;border:1px solid var(--border);background:var(--btn);color:var(--text);cursor:pointer;}
.tabs button.active{background:var(--accent);color:#fff;border-color:var(--accent);}
.tab-content{display:none;}
.tab-content.active{display:block;}
.unit-card{display:flex;flex-direction:column;align-items:center;padding:10px;border:1px solid var(--border);border-radius:6px;background:var(--card);}
.unit-card img{width:100px;height:100px;border-radius:6px;margin-bottom:6px;}
.unit-card .name{font-weight:bold;margin-bottom:4px;}
.unit-card .desc,.unit-card .stats{font-size:12px;color:var(--muted);margin-bottom:2px;text-align:center;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;}
</style>
</head>
<body>

<header>エモバト情報</header>
<nav><a href="index.html">← ホームに戻る</a></nav>

<main>
<div class="tabs">
  <button class="tab-btn active" data-tab="units">機体</button>
  <button class="tab-btn" data-tab="rate">レート</button>
  <button class="tab-btn" data-tab="events">イベント</button>
</div>

<div id="units" class="tab-content active">
  <div class="grid" id="unitGrid">読み込み中...</div>
</div>

<div id="rate" class="tab-content">
  <p id="rateContent">読み込み中...</p>
</div>

<div id="events" class="tab-content">
  <ul id="eventList">読み込み中...</ul>
</div>

</main>

<script>
let unitsData=[], rateData={}, eventsData=[];

// --- タブ切替 ---
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

// --- ユニット表示（画像＋名前） ---
fetch('data/emobato_units.json').then(r=>r.json()).then(json=>{
  unitsData=json;
  const container=document.getElementById('unitGrid');
  container.innerHTML=''; // 初期化

  unitsData.forEach(u=>{
    const a=document.createElement('a');
    a.href='unit_detail.html?unit='+u.id;

    const card=document.createElement('div');
    card.className='unit-card';

    const img=document.createElement('img');
    img.src=u.img;
    img.alt=u.aircraftName;

    const name=document.createElement('div');
    name.className='name';
    name.textContent=u.aircraftName;

    card.appendChild(img);
    card.appendChild(name);
    a.appendChild(card);
    container.appendChild(a);
  });
});

// --- レート表示 ---
fetch('data/emobato_rate.json').then(r=>r.json()).then(json=>{
  rateData=json;
  document.getElementById('rateContent').textContent='平均レート: '+rateData.avg+' / 総戦績: '+rateData.total;
});

// --- イベント表示 ---
fetch('data/emobato_events.json').then(r=>r.json()).then(json=>{
  eventsData=json;
  const ul=document.getElementById('eventList');
  ul.innerHTML='';
  eventsData.forEach(ev=>{
    const li=document.createElement('li');
    li.textContent=ev.title+' ('+ev.date+')';
    ul.appendChild(li);
  });
});
</script>

</body>
</html>
