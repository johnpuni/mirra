<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚¨ãƒ¢ãƒãƒˆæ©Ÿä½“ä¸€è¦§</title>
<style>
:root{
  --bg:#f5f5f5; --card:#fff; --text:#222; --muted:#666; --border:#ccc; --accent:#333; --btn:#eee; --shadow:0 2px 8px rgba(0,0,0,0.1);
}
body.dark{ --bg:#0f1115; --card:#151922; --text:#e6e6e6; --muted:#a3a3a3; --border:#2b2f3a; --accent:#7aa2f7; --btn:#1b2030; --shadow:0 2px 10px rgba(0,0,0,0.35);}
body{font-family:sans-serif; margin:0; background:var(--bg); color:var(--text); transition:.2s;}
header{background:var(--accent); padding:12px; text-align:center; color:#fff; font-size:1.3em;}
nav{text-align:center; margin:10px 0;}
nav a{color:var(--accent); font-weight:bold; text-decoration:none; font-size:1.1em;}
main{max-width:960px; margin:0 auto; padding:20px;}
.controls{display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-bottom:15px;}
.controls input,.controls select,.controls button{padding:6px 8px; font-size:14px; border:1px solid var(--border); border-radius:6px; background:var(--card); color:var(--text);}
.tab-buttons{display:flex; justify-content:center; gap:6px; margin-bottom:15px;}
.tab-buttons button{padding:6px 10px; border-radius:6px; border:1px solid var(--border); background:var(--btn); color:var(--text); cursor:pointer;}
.tab-buttons button.active{background:var(--accent); color:#fff; border-color:var(--accent);}
.event-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:12px;}
.event-card{border-radius:8px; overflow:hidden; text-align:center; background:var(--card); box-shadow:var(--shadow); padding:8px; cursor:pointer;}
.event-card img{width:100%; border-radius:6px; display:block;}
.event-card div{margin-top:4px; font-size:13px; color:var(--muted);}
.muted{color:var(--muted); font-size:12px;}
@media(max-width:600px){.controls{flex-direction:column; align-items:center;} .controls input,.controls select,.controls button{width:90%;} .tab-buttons{flex-wrap:wrap;}}
</style>
</head>
<body>
<header>ã‚¨ãƒ¢ãƒãƒˆæ©Ÿä½“ä¸€è¦§</header>
<nav><a href="index.html">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a></nav>

<main>
<div class="controls">
  <input type="text" id="search" placeholder="æ©Ÿä½“åãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
  <button id="themeToggle">ğŸŒ™ ãƒ€ãƒ¼ã‚¯</button>
</div>

<div class="tab-buttons">
  <button data-tab="units" class="active">æ©Ÿä½“</button>
  <button data-tab="rates">ãƒ¬ãƒ¼ãƒˆ</button>
  <button data-tab="events">ã‚¤ãƒ™ãƒ³ãƒˆ</button>
</div>

<div class="event-grid" id="unitList">èª­ã¿è¾¼ã¿ä¸­...</div>
<p class="muted" id="hint"></p>
</main>

<script>
let units=[];

// ä»®ã®JSONãƒ‡ãƒ¼ã‚¿
units=[
  {"id":"u001","name":"S01 ãƒ¬ã‚ª","img":"images/unit1.webp","rate":1200,"events":3,"keywords":["é«˜é€Ÿ","è¿‘è·é›¢"]},
  {"id":"u002","name":"S02 ã‚¿ã‚¤ã‚¬ãƒ¼","img":"images/unit2.webp","rate":950,"events":2,"keywords":["é è·é›¢","é˜²å¾¡"]},
  {"id":"u003","name":"S03 ãƒ©ã‚¤ãƒˆãƒ‹ãƒ³ã‚°","img":"images/unit3.webp","rate":1500,"events":4,"keywords":["é«˜é€Ÿ","æ”¯æ´"]}
];

(function initTheme(){if(localStorage.getItem("emomo_theme")==="dark") document.body.classList.add("dark");})();
document.getElementById("themeToggle").addEventListener("click",()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("emomo_theme",document.body.classList.contains("dark")?"dark":"light");
  document.getElementById("themeToggle").textContent=document.body.classList.contains("dark")?"â˜€ï¸ ãƒ©ã‚¤ãƒˆ":"ğŸŒ™ ãƒ€ãƒ¼ã‚¯";
});
document.getElementById("themeToggle").textContent=document.body.classList.contains("dark")?"â˜€ï¸ ãƒ©ã‚¤ãƒˆ":"ğŸŒ™ ãƒ€ãƒ¼ã‚¯";

// ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
let currentTab="units";
document.querySelectorAll(".tab-buttons button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    currentTab=btn.dataset.tab;
    document.querySelectorAll(".tab-buttons button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    renderUnits();
  });
});

function normalize(s){ return s.toLowerCase().replace(/[ï¼¡-ï¼ºï½-ï½šï¼-ï¼™]/g,c=>String.fromCharCode(c.charCodeAt(0)-0xFEE0)); }

function renderUnits(){
  const list=document.getElementById("unitList");
  const q=document.getElementById("search").value.trim().split(/\s+/).map(normalize).filter(Boolean);
  const filtered=units.filter(u=>{
    if(q.length===0) return true;
    return q.every(word=>normalize(u.name).includes(word) || (u.keywords||[]).some(k=>normalize(k).includes(word)));
  });

  let html="";
  if(currentTab==="units"){
    html=filtered.map(u=>`
      <div class="event-card" onclick="location.href='unit_detail.html?id=${u.id}'">
        <img src="${u.img}" alt="${u.name}">
        <div>${u.name}</div>
      </div>
    `).join("");
  } else if(currentTab==="rates"){
    html=filtered.map(u=>`
      <div class="event-card">
        <div>${u.name}</div>
        <div>ãƒ¬ãƒ¼ãƒˆç´¯è¨ˆ: ${u.rate}</div>
      </div>
    `).join("");
  } else if(currentTab==="events"){
    html=filtered.map(u=>`
      <div class="event-card">
        <div>${u.name}</div>
        <div>é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆ: ${u.events}</div>
      </div>
    `).join("");
  }

  list.innerHTML=html;
  document.getElementById("hint").textContent=`${filtered.length}ä»¶ãƒ’ãƒƒãƒˆ`;
}

document.getElementById("search").addEventListener("input",renderUnits);

renderUnits();
</script>
</body>
</html>
